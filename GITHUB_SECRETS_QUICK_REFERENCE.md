# üîê GitHub Secrets - –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

## –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1. –ü–æ–ª—É—á–∏—Ç–µ SSH –∫–ª—é—á

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –¥–ª—è GitHub Actions
ssh-keygen -t ed25519 -C "github-actions" -f ~/.ssh/github_actions_deploy
# –ù–∞–∂–º–∏—Ç–µ Enter –¥–≤–∞–∂–¥—ã (–±–µ–∑ passphrase)

# –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ Droplet
cat ~/.ssh/github_actions_deploy.pub | ssh root@64.227.75.233 "cat >> ~/.ssh/authorized_keys"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -i ~/.ssh/github_actions_deploy root@64.227.75.233 "echo 'OK'"
```

### 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–ï–°–¨ –≤—ã–≤–æ–¥ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã (–≤–∫–ª—é—á–∞—è BEGIN –∏ END —Å—Ç—Ä–æ–∫–∏)
cat ~/.ssh/github_actions_deploy
```

### 3. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** ‚Üí **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions** ‚Üí **New repository secret**

–î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–∏ —Å–µ–∫—Ä–µ—Ç–∞:

#### –°–µ–∫—Ä–µ—Ç 1: SSH_PRIVATE_KEY
```
Name: SSH_PRIVATE_KEY
Value: [–í—Å—Ç–∞–≤—å—Ç–µ –≤–µ—Å—å –≤—ã–≤–æ–¥ –∏–∑ —à–∞–≥–∞ 2]
```

#### –°–µ–∫—Ä–µ—Ç 2: DROPLET_HOST
```
Name: DROPLET_HOST
Value: 64.227.75.233
```

#### –°–µ–∫—Ä–µ—Ç 3: DROPLET_USER
```
Name: DROPLET_USER
Value: root
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É

```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç
git commit --allow-empty -m "test: verify GitHub Actions"
git push origin main

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–∞ GitHub
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ: –í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí Actions ‚Üí Deploy to Production
```

## –¢–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

| –°–µ–∫—Ä–µ—Ç | –ó–Ω–∞—á–µ–Ω–∏–µ |
|--------|----------|
| `SSH_PRIVATE_KEY` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á (—Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π) |
| `DROPLET_HOST` | `64.227.75.233` |
| `DROPLET_USER` | `root` |

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤

### –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã:
1. GitHub ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions
2. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤–∏–¥–Ω—ã 3 —Å–µ–∫—Ä–µ—Ç–∞ (–∑–Ω–∞—á–µ–Ω–∏—è —Å–∫—Ä—ã—Ç—ã)

### –ü—Ä–∏–∑–Ω–∞–∫–∏ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ Workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ push –≤ main
- ‚úÖ –®–∞–≥ "Setup SSH" –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –§–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º:
- ‚ùå `Permission denied (publickey)` ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –∫–ª—é—á
- ‚ùå `Could not resolve hostname` ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DROPLET_HOST
- ‚ùå `Load key: invalid format` ‚Üí –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –∑–∞–Ω–æ–≤–æ

## Troubleshooting –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å—ë —Å—Ä–∞–∑—É
echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –∫–ª—é—á–∞ ==="
ls -la ~/.ssh/github_actions_deploy* 2>/dev/null || echo "‚ùå –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω"

echo -e "\n=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ==="
ssh -i ~/.ssh/github_actions_deploy -o ConnectTimeout=5 root@64.227.75.233 "echo '‚úÖ SSH —Ä–∞–±–æ—Ç–∞–µ—Ç'" 2>/dev/null || echo "‚ùå SSH –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"

echo -e "\n=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ==="
ssh -i ~/.ssh/github_actions_deploy root@64.227.75.233 "grep -c 'github-actions' ~/.ssh/authorized_keys" 2>/dev/null && echo "‚úÖ –ö–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ" || echo "‚ùå –ö–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"

echo -e "\n=== –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Droplet ==="
echo "Host: 64.227.75.233"
echo "User: root"
echo "Domain: onbr.site"
```

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π —Å–º.: [docs/GITHUB_SECRETS_SETUP.md](docs/GITHUB_SECRETS_SETUP.md)

---

**–°–æ–≤–µ—Ç:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ –ø–∞—Ä–æ–ª–µ–π). –ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –µ–≥–æ, –ø—Ä–∏–¥–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π.
