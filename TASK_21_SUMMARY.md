# Task 21: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è - –°–≤–æ–¥–∫–∞

## ‚úÖ –°—Ç–∞—Ç—É—Å: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –≤–µ—Ç–∫—É `main`. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω. –í—ã–ø–æ–ª–Ω–µ–Ω–æ 4 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º CI/CD. –¢–µ–∫—É—â–∏–π workflow (3b0aa46) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–º–º–∏—Ç (df00890)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (81 —Ñ–∞–π–ª)
- –û–±–Ω–æ–≤–ª–µ–Ω VERSION.md –¥–æ –≤–µ—Ä—Å–∏–∏ 1.0.1
- Push –≤ –≤–µ—Ç–∫—É main

### 2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å docker-compose (f47e72f)
- GitHub Actions –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker Compose v2
- –û–±–Ω–æ–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å: `docker-compose` ‚Üí `docker compose`

### 3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å env —Ñ–∞–π–ª–∞–º–∏ (ffc348c)
- –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö .env —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### 4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ "no destination" (3b0aa46)
- –£–±—Ä–∞–Ω Docker Buildx
- –í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É `docker build`

## üìÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ

- **–î–∞—Ç–∞:** 25 –Ω–æ—è–±—Ä—è 2025
- **Commits:**
  - df00890 - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è
  - f47e72f - fix docker compose v2 syntax
  - ffc348c - create temp env files
  - 2788f7d - –ø–æ–ø—ã—Ç–∫–∞ —Å buildx --load
  - 3b0aa46 - —É–±—Ä–∞–Ω buildx, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π build
- **–í–µ—Ä—Å–∏—è:** 1.0.1
- **–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ GitHub Actions

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: docker-compose command not found
**–û–ø–∏—Å–∞–Ω–∏–µ:** GitHub Actions runner –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Docker Compose v2

**–†–µ—à–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–º–∞–Ω–¥—ã

**Commit:** f47e72f

### –ü—Ä–æ–±–ª–µ–º–∞ 2: env files not found
**–û–ø–∏—Å–∞–Ω–∏–µ:** docker-compose.prod.yml —Ç—Ä–µ–±—É–µ—Ç .env —Ñ–∞–π–ª—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤

**Commit:** ffc348c

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "no destination" error
**–û–ø–∏—Å–∞–Ω–∏–µ:** Docker Buildx —Å–æ–∑–¥–∞–≤–∞–ª –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –æ–±—Ä–∞–∑–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—Ç –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É `docker build`

**Commits:** 2788f7d, 3b0aa46

## üîó –ü—Ä–æ–≤–µ—Ä–∫–∞

**GitHub Actions:**
https://github.com/grigra27/flow_polis/actions

**–ü–æ—Å–ª–µ–¥–Ω–∏–π commit:**
https://github.com/grigra27/flow_polis/commit/3b0aa46

**–°–∞–π—Ç:**
https://onbr.site

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è workflow:

1. ‚úÖ Validate Configuration - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. ‚úÖ Build Docker Image - —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
3. ‚è≥ Deploy to Digital Ocean - –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. ‚è≥ Run Migrations - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
5. ‚è≥ Health Check - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
6. ‚è≥ Notify - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

## üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3.1 ‚úÖ
Workflow –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ push –≤ main

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3.2 ‚è≥
Docker –æ–±—Ä–∞–∑—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (–æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3.3 ‚è≥
SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π (–æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ 3.4 ‚è≥
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è GitHub Actions workflow –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
